<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Configuration | HRMatcher</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">    <style>        body {
            background: linear-gradient(50deg, #458cf7 10%, #578bd8 50%, #b7bfd1);
            min-height: 100vh;
            font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
            position: relative;
            overflow-x: hidden;
        }
        
        .config-container {
            max-width: 1000px;
            margin: 3rem auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 2rem;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                0 4px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            overflow: hidden;
            position: relative;
            z-index: 1;
        }        .config-header {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 2.5rem 2rem 1.5rem 2rem;
            text-align: center;
            position: relative;
        }
        .config-header h2 {
            font-weight: 800;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        .config-header .subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 0;
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        .config-header .back-link {
            position: absolute;
            left: 2rem;
            top: 2rem;
            color: #fff;
            font-size: 1.2rem;
            text-decoration: none;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 12px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }        .config-header .back-link:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .config-body {
            padding: 2.5rem 2rem 2rem 2rem;
        }
        .config-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 
                0 4px 16px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }        .config-form label {
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        .config-form .form-control, .config-form .form-select {
            border-radius: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 1rem;
            padding: 0.7rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            color: #fff;
            transition: all 0.3s ease;
        }
        
        .config-form .form-control::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .config-form .form-control:focus, .config-form .form-select:focus {
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.15);
            outline: none;
        }
        .input-group-text {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.75rem 0 0 0.75rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
        }        .btn-primary, .btn-info {
            border-radius: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.02em;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .btn-primary {
            background: rgba(99, 102, 241, 0.3);
            color: #fff;
            border: 1px solid rgba(99, 102, 241, 0.4);
        }        .btn-primary:hover, .btn-info:hover {
            background: rgba(99, 102, 241, 0.5);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.3);
            transform: translateY(-2px);
            color: #fff;
        }
        
        .btn-outline-primary {
            border-radius: 0.75rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;        }
        
        .btn-outline-primary:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .protocol-info {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 1.2rem 1.5rem;
            margin-bottom: 2rem;
            border-left: 4px solid rgba(99, 102, 241, 0.6);
            color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }          .table {
            border-radius: 1rem;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            margin-bottom: 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        .table th, .table td {
            vertical-align: middle;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            border-color: rgba(255, 255, 255, 0.15);
            background: transparent;
        }
        .table th {
            background: rgba(255, 255, 255, 0.12);
            color: rgba(255, 255, 255, 0.95);
            font-weight: 700;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        .table-hover tbody tr:hover {
            background: rgba(99, 102, 241, 0.15);
            transform: translateY(-1px);
            transition: all 0.3s ease;
        }
        .table tbody tr {
            transition: all 0.3s ease;
        }
        
        .alert {
            border-radius: 0.75rem;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.9);
        }
        
        .modal-content {
            border-radius: 1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .modal-header {
            border-radius: 1rem 1rem 0 0;
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.9);
        }
        .modal-body {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .form-select {
            background-color: rgba(255, 255, 255, 0.1);
            color: #fff;
            background-image:
                linear-gradient(to right, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.1) 85%, transparent 100%),
                url("data:image/svg+xml,%3Csvgwidth='16'height='16'fill='white'xmlns='http://www.w3.org/2000/svg'%3E%3Cpathd='M4.646 6.646a.5.5 0 0 1 .708 0L8 9.293l2.646-2.647a.5.5 0 0 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.25em 1.25em;
            padding-right: 3rem;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            position: relative;
            z-index: 1;
        }
        
        .form-select option {
            background: #1e293b;
            color: #fff;
        }
        @media (max-width: 700px) {
            .config-container { margin: 1rem; }
            .config-header, .config-body { padding: 1rem; }
            .config-card { padding: 1rem; }
            /* Stack the action buttons vertically on mobile */
            .config-form .action-buttons {
                flex-direction: column !important;
                gap: 0.75rem;
            }
            .config-form .action-buttons .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="config-container">
        <div class="config-header">
            <a href="{% url 'resume_matcher' %}" class="back-link">
                <i class="bi bi-arrow-left"></i>
            </a>
            <h2>
                <i class="bi bi-envelope-gear me-2"></i>Email Server Configuration
            </h2>
            <div class="subtitle">Set up your email to fetch and send resumes securely</div>
        </div>
        <div class="config-body">
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            {% endif %}

            <div class="protocol-info mb-4">
                <h5 class="mb-2"><i class="bi bi-info-circle"></i> Configuration Guide</h5>
                <ul class="mb-0">
                    <li><strong>SMTP</strong>: Used for sending emails (ports: 587, 465)</li>
                    <li><strong>IMAP</strong>: Used for fetching emails (ports: 993, 143)</li>
                    <li>Contact your email provider for exact server details</li>
                </ul>
            </div>

            <div class="config-card">
                <form id="emailConfigForm" class="config-form" method="post" action="{% url 'email_config' %}">
                    {% csrf_token %}
                    <div class="row g-4">
                        <div class="col-md-6">
                            <label for="id_email_host" class="form-label">
                                <i class="bi bi-server me-1"></i>Email Server
                            </label>
                            <input type="text" name="email_host" class="form-control" 
                                   id="id_email_host" required 
                                   placeholder="e.g. imap.gmail.com" 
                                   value="{{ form.email_host.value|default:'' }}"
                                   autocomplete="off">
                            <div class="form-text">
                                <small>Enter only the server name (no http:// or https://)</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="id_email_port" class="form-label">Port</label>
                            <input type="number" class="form-control" name="email_port" id="id_email_port" 
                                   value="{{ form.email_port.value|default:'' }}" 
                                   placeholder="e.g. 587, 465, 993, 143" required>
                            <div class="form-text">
                                <small>Common ports: SMTP (587), SMTP SSL (465), IMAP (993), IMAP (143)</small>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="id_email_username" class="form-label">
                                <i class="bi bi-person me-1"></i>Email Username
                            </label>
                            <input type="text" class="form-control" name="email_username" id="id_email_username" 
                                   value="{{ form.email_username.value|default:'' }}"
                                   placeholder="Your email address" required>
                        </div>
                        <div class="col-md-6">
                            <label for="id_email_password" class="form-label">
                                <i class="bi bi-key me-1"></i>Email Password
                            </label>
                            <div class="input-group">
                                <input type="password" class="form-control" name="email_password" id="id_email_password" 
                                       placeholder="Your email password or app password" required>
                                <button type="button" class="btn btn-outline-primary" onclick="togglePassword()" tabindex="-1">
                                    <i id="eyeIcon" class="bi bi-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="id_email_backend" class="form-label">
                                <i class="bi bi-envelope me-1"></i>Email Protocol
                            </label>
                            <select class="form-select" name="email_backend" id="id_email_backend" required>
                                <option value="">Select Protocol</option>
                                <option value="imap" {% if form.email_backend.value == 'imap' %}selected{% endif %}>IMAP (Fetch Emails)</option>
                                <option value="smtp" {% if form.email_backend.value == 'smtp' %}selected{% endif %}>SMTP (Send Emails)</option>
                            </select>
                            <div class="form-text">
                                <small>Choose IMAP for fetching resumes, SMTP for sending emails</small>
                            </div>
                        </div>
                        <div class="col-md-6 d-flex align-items-center">
                            <div>
                                <input type="checkbox" class="form-check-input me-2" name="use_tls" id="id_use_tls" 
                                       {% if form.use_tls.value %}checked{% endif %}>
                                <label class="form-check-label" for="id_use_tls">Use TLS/SSL</label>
                                <div class="form-text">
                                    <small>Usually required for secure connections (recommended)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between mt-4 action-buttons">
                        <button type="button" class="btn btn-info" onclick="testEmailConnection()">
                            <i class="bi bi-check-circle me-1"></i>Test Connection
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-save me-1"></i>Save Configuration
                        </button>
                    </div>
                </form>
            </div>

            <div class="config-card">
                <div class="mb-3">
                    <h5 class="mb-3"><i class="bi bi-info-circle me-2"></i>Common Email Providers</h5>
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Provider</th>
                                    <th>IMAP Server</th>
                                    <th>IMAP Port</th>
                                    <th>SMTP Server</th>
                                    <th>SMTP Port</th>
                                    <th>TLS/SSL</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Gmail</td>
                                    <td>imap.gmail.com</td>
                                    <td>993</td>
                                    <td>smtp.gmail.com</td>
                                    <td>465</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>Outlook/Office 365</td>
                                    <td>outlook.office365.com</td>
                                    <td>993</td>
                                    <td>smtp.office365.com</td>
                                    <td>587</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>Yahoo</td>
                                    <td>imap.mail.yahoo.com</td>
                                    <td>993</td>
                                    <td>smtp.mail.yahoo.com</td>
                                    <td>465</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>GoDaddy</td>
                                    <td>imap.secureserver.net</td>
                                    <td>993</td>
                                    <td>smtpout.secureserver.net</td>
                                    <td>465</td>
                                    <td>Yes</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="mt-3 d-flex flex-wrap gap-2">
                        <div class="form-text color:white mt-2">
                            <medium>Choose any of the following providers to auto-fill the details</medium>
                        </div>
                        <button type="button" class="btn btn-outline-primary" onclick="fillGmailSettings()">Use Gmail</button>
                        <button type="button" class="btn btn-outline-primary" onclick="fillOutlookSettings()">Use Outlook</button>
                        <button type="button" class="btn btn-outline-primary" onclick="fillYahooSettings()">Use Yahoo</button>
                        <button type="button" class="btn btn-outline-primary" onclick="fillGoDaddySettings()">Use GoDaddy</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Connection Test Modal -->
    <div class="modal fade" id="connectionTestModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title">Testing Email Connection</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                    <div id="testResult" class="mt-3 d-none"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function togglePassword() {
            const pwdInput = document.getElementById('id_email_password');
            const eyeIcon = document.getElementById('eyeIcon');
            if (pwdInput.type === 'password') {
                pwdInput.type = 'text';
                eyeIcon.classList.remove('bi-eye');
                eyeIcon.classList.add('bi-eye-slash');
            } else {
                pwdInput.type = 'password';
                eyeIcon.classList.remove('bi-eye-slash');
                eyeIcon.classList.add('bi-eye');
            }
        }
        // Moved outside DOMContentLoaded to make function globally accessible
        async function testEmailConnection() {
            // Get form elements
            const hostInput = document.getElementById('id_email_host');
            const portInput = document.getElementById('id_email_port');
            const usernameInput = document.getElementById('id_email_username');
            const passwordInput = document.getElementById('id_email_password');
            const tlsInput = document.getElementById('id_use_tls');
            
            // Validate inputs
            if (!hostInput || !hostInput.value.trim()) {
                alert('Please enter the email server address');
                hostInput.focus();
                return;
            }
            
            if (!portInput || !portInput.value.trim()) {
                alert('Please enter the port number');
                portInput.focus();
                return;
            }
            
            if (!usernameInput || !usernameInput.value.trim()) {
                alert('Please enter your email username');
                usernameInput.focus();
                return;
            }
            
            if (!passwordInput || !passwordInput.value.trim()) {
                alert('Please enter your email password');
                passwordInput.focus();
                return;
            }
            
            // Create FormData
            const formData = new FormData();
            
            // Clean host value (remove protocol if present)
            let hostValue = hostInput.value.trim();
            if (hostValue.startsWith('http://') || hostValue.startsWith('https://')) {
                hostValue = hostValue.split('://', 1)[1];
            }
            
            formData.append('email_host', hostValue);
            formData.append('email_port', portInput.value.trim());
            formData.append('email_username', usernameInput.value.trim());
            formData.append('email_password', passwordInput.value);
            formData.append('use_tls', tlsInput.checked ? 'true' : 'false');
            
            // Add CSRF token
            const csrfToken = document.querySelector('[name=csrfmiddlewaretoken]');
            if (csrfToken) {
                formData.append('csrfmiddlewaretoken', csrfToken.value);
            }
            
            // Show modal with loading state
            const modal = document.getElementById('connectionTestModal');
            const bsModal = new bootstrap.Modal(modal);
            const resultDiv = modal.querySelector('#testResult');
            resultDiv.innerHTML = '';
            modal.querySelector('.spinner-border').classList.remove('d-none');
            resultDiv.classList.add('d-none');
            bsModal.show();

            try {
                const response = await fetch('/test-email-connection/', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'X-CSRFToken': csrfToken ? csrfToken.value : ''
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    resultDiv.innerHTML = `
                        <div class="alert alert-success">
                            <i class="bi bi-check-circle-fill me-2"></i>${data.message}
                        </div>
                        <div class="text-center mt-3">
                            <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
                                Continue
                            </button>
                        </div>
                    `;
                } else {
                    // Provide helpful suggestions based on the error
                    let suggestions = '';
                    
                    if (data.message.includes('resolve hostname') || data.message.includes('getaddrinfo failed')) {
                        suggestions = `
                            <div class="mt-3">
                                <strong>Suggestions:</strong>
                                <ul class="text-start">
                                    <li>Check if the server address is correct</li>
                                    <li>Make sure you're connected to the internet</li>
                                    <li>Try using a common email provider server:
                                        <ul>
                                            <li>Gmail: imap.gmail.com (IMAP, port 993)</li>
                                            <li>Outlook: outlook.office365.com (IMAP, port 993)</li>
                                            <li>Yahoo: imap.mail.yahoo.com (IMAP, port 993)</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        `;
                    } else if (data.message.includes('timed out')) {
                        suggestions = `
                            <div class="mt-3">
                                <strong>Suggestions:</strong>
                                <ul class="text-start">
                                    <li>Check your internet connection</li>
                                    <li>Verify the server address and port</li>
                                    <li>Your firewall might be blocking the connection</li>
                                </ul>
                            </div>
                        `;
                    } else if (data.message.includes('Authentication failed')) {
                        suggestions = `
                            <div class="mt-3">
                                <strong>Suggestions:</strong>
                                <ul class="text-start">
                                    <li>Double-check your username and password</li>
                                    <li>For Gmail, you may need to use an App Password</li>
                                    <li>Make sure your account has IMAP/SMTP access enabled</li>
                                </ul>
                            </div>
                        `;
                    }
                    
                    resultDiv.innerHTML = `
                        <div class="alert alert-danger">
                            <i class="bi bi-exclamation-triangle-fill me-2"></i>${data.message}
                        </div>
                        ${suggestions}
                    `;
                }
                
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <i class="bi bi-exclamation-triangle-fill me-2"></i>Network error: ${error.message}
                    </div>
                    <div class="mt-3">
                        <strong>Suggestions:</strong>
                        <ul class="text-start">
                            <li>Check your internet connection</li>
                            <li>Make sure the server is reachable</li>
                        </ul>
                    </div>
                `;
            } finally {
                modal.querySelector('.spinner-border').classList.add('d-none');
                resultDiv.classList.remove('d-none');
            }
        }
    
        document.addEventListener('DOMContentLoaded', function() {
            console.log("Clearing form fields...");
            
            // Force clear all form fields on page load
            setTimeout(function() {
                document.getElementById('id_email_host').value = '';
                document.getElementById('id_email_port').value = '';
                document.getElementById('id_email_backend').value = '';
                document.getElementById('id_email_username').value = '';
                document.getElementById('id_email_password').value = '';
                document.getElementById('id_use_tls').checked = false;
                
                console.log("Fields cleared");
            }, 100);
            
            // Protocol/port suggestions
            document.getElementById('id_email_backend').addEventListener('change', function() {
                const portField = document.getElementById('id_email_port');
                if (this.value.includes('smtp')) {
                    portField.placeholder = "587 (TLS) or 465 (SSL)";
                } else if (this.value.includes('imap')) {
                    portField.placeholder = "993 (SSL) or 143 (plain)";
                }
            });
        });
        function fillGmailSettings() {
            document.getElementById('id_email_host').value = 'imap.gmail.com';
            document.getElementById('id_email_port').value = '993';
            document.getElementById('id_use_tls').checked = true;
        }
        
        function fillOutlookSettings() {
            document.getElementById('id_email_host').value = 'outlook.office365.com';
            document.getElementById('id_email_port').value = '993';
            document.getElementById('id_use_tls').checked = true;
        }
        
        function fillYahooSettings() {
            document.getElementById('id_email_host').value = 'imap.mail.yahoo.com';
            document.getElementById('id_email_port').value = '993';
            document.getElementById('id_use_tls').checked = true;
        }
        
        function fillGoDaddySettings() {
            document.getElementById('id_email_host').value = 'imap.secureserver.net';
            document.getElementById('id_email_port').value = '993';
            document.getElementById('id_use_tls').checked = true;
        }

        // Update the protocol/port suggestions in email_config.html's JavaScript
document.getElementById('id_email_backend').addEventListener('change', function() {
    const portField = document.getElementById('id_email_port');
    if (this.value === 'smtp') {
        portField.placeholder = "587 (TLS) or 465 (SSL)";
    } else if (this.value === 'imap') {
        portField.placeholder = "993 (SSL) or 143 (plain)";
    }
});
    </script>
</body>
</html>
